{% extends "base.html"%}
{% load static %}
{% load mathfilters %}

{% block content%}


<div class="container mt-5 ">
    <div class="row">
        <div class="col-12 text-center mb-3">
            <h2 class="mb-3"><i class="far fa-check-circle text-green"></i> Thank you for your purchase!</h2>
            <p>The order confirmation email with details of your order has been sent to your email address.</p>
            <p>See the order details below.</p>
        </div>
    </div>
    <!--Order details-->
    <div class="row mb-4">
        <div class="col-12 col-lg-6">
        <!--Order info-->
            <div class="card">
                <h5 class="card-header checkout-card-header"><i class="fas fa-info-circle text-salmon"></i> Order Info</h5>
                <div class="card-body">
                    <p class="card-text"><strong>Order number:</strong> {{ order.order_number }}</p>
                    <p class="card-text"><strong> Order Date:</strong>  {{ order.purchase_date }}</p>
                </div>
            </div>
            
            <div class="card mt-4">
            <!--Shipping details-->
                <h5 class="card-header checkout-card-header"><i class="fas fa-shipping-fast"></i> Shipping Details</h5>
                <div class="card-body">
                    <p class="card-text"><strong>Full Name:</strong> {{ order.full_name }}</p>
                    <p class="card-text"><strong> Address:</strong></p>
                    <p>{{ order.address_line1 }}</p>
                    {% if order.address_line2 %}
                        <p>{{ order.address_line2 }}</p>
                    {% endif %}
                    <p>{{ order.town_or_city }}</p>
                    {% if order.county %}
                        <p>{{ order.county }}</p>
                    {% endif %}
                    <p>{{ order.country }}</p>
                    {% if order.postcode %}
                        <p>{{ order.postcode }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
       
        <div class="col-12 col-lg-6">
            <div class="card">
             <!--Order summary-->
                    <h5 class="card-header checkout-card-header"><i class="fas fa-clipboard-list text-salmon"></i> Order Summary</h5>
                    <div class="card-body">
                        <div class="order-summary-items">
                            {% for item in order.orderitems.all %}
                            <div class="row mx-0">
                                <div class="col-3 mb-1 mb-md-3">
                                    <img class="img-fluid" src="{{ item.product.image_gallery.image }}" alt="{{ product.name }}">
                                </div>
                                <div class="col-9">
                                    <p class="font-weight-bold">{{ item.product.name }}</p>
                                    <p class="small">Price: €{{ item.product.price}}</p>
                                    {% if item.product.is_a_service %}
                                    <p class="small">{{ item.quantity }} participant(s)</p>
                                    {% else %}
                                    <p class="small">Qty: {{ item.quantity }}</p>
                                    {% endif %}
                                    <p class="small">Subtotal: €{{ item.product.price|mul:item.quantity}}</p>
                                </div> 
                            </div>
                            {% endfor %}
                        </div>
                        <div class=" border-top pt-1 pt-md-2">
                            <p class="small mt-1 mt-md-3 mb-1 text-muted">Delivery Cost: €{{ delivery|floatformat:2 }}</p>
                            <p class="lead">Grand Total: <span class="font-weight-bold">€{{ grand_total|floatformat:2 }}</span></p>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}